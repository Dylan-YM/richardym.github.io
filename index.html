<!DOCTYPE html>
<html >
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="richard" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="richard's blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="richard's blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="richard's blog">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="richard&#39;s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>richard&#39;s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: false
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">richard</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:ym_302@163.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/u/3176570100?refer_flag=1001030102_" title="新浪微博"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 简书" href="http://www.jianshu.com/users/ee84d859d5f0/latest_articles" title="简书"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/APP/">APP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MAC/">MAC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/U盘/">U盘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xcode8/">Xcode8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/下载/">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发/">开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统/">系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/请求/">请求</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跳转/">跳转</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/适配/">适配</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">爱生活,爱唱歌,爱旅游的iOS开发者。</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">richard</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">richard</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:ym_302@163.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/u/3176570100?refer_flag=1001030102_" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/users/ee84d859d5f0/latest_articles" title="简书"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-更新Xcode8的坑" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/09/15/Xcode8.html" class="article-date">
      <time datetime="2016-09-15T05:20:29.000Z" itemprop="datePublished">2016-09-15</time>
</a>

 
    <a href="/blog/2016/09/15/Xcode8.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/09/15/Xcode8.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/09/15/Xcode8.html">更新Xcode8的坑</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>现在在苹果的官网上，我们已经可以下载到Xcode8的GM版本了，加上9.14日凌晨，苹果就要正式推出iOS10系统的推送了，在此之际，iOS10的适配已经迫在眉睫啦，不知道Xcode8 beat版本，童鞋们有木有下载过来试试呢？就我的使用来说，总体觉得苹果还是坑不断，但是也在一直进步的啦。下面我就来说说，iOS10的适配以及Xcode8使用上的一些注意点。</p>
<h2 id="Notification-通知"><a href="#Notification-通知" class="headerlink" title="Notification(通知)"></a>Notification(通知)</h2><p>自从Notification被引入之后，苹果就不断的更新优化，但这些更新优化只是小打小闹，直至现在iOS 10开始真正的进行大改重构，这让开发者也体会到UserNotifications的易用，功能也变得非常强大。</p>
<ul>
<li>iOS 9 以前的通知</li>
</ul>
<p>1.在调用方法时，有些方法让人很难区分，容易写错方法，这让开发者有时候很苦恼。</p>
<p>2.应用在运行时和非运行时捕获通知的路径还不一致。</p>
<p>3.应用在前台时，是无法直接显示远程通知，还需要进一步处理。</p>
<p>4.已经发出的通知是不能更新的，内容发出时是不能改变的，并且只有简单文本展示方式，扩展性根本不是很好。</p>
<ul>
<li>iOS 10 开始的通知</li>
</ul>
<p>1.所有相关通知被统一到了UserNotifications.framework框架中。</p>
<p>2.增加了撤销、更新、中途还可以修改通知的内容。</p>
<p>3.通知不在是简单的文本了，可以加入视频、图片，自定义通知的展示等等。</p>
<p>4.iOS 10相对之前的通知来说更加好用易于管理，并且进行了大规模优化，对于开发者来说是一件好事。</p>
<p>5.iOS 10开始对于权限问题进行了优化，申请权限就比较简单了(本地与远程通知集成在一个方法中)。</p>
<h2 id="ATS的问题"><a href="#ATS的问题" class="headerlink" title="ATS的问题"></a>ATS的问题</h2><p>iOS 9中默认非HTTS的网络是被禁止的，当然我们也可以把NSAllowsArbitraryLoads设置为YES禁用ATS。不过iOS 10从2017年1月1日起苹果不允许我们通过这个方法跳过ATS，也就是说强制我们用HTTPS，如果不这样的话提交App可能会被拒绝。但是我们可以通过NSExceptionDomains来针对特定的域名开放HTTP可以容易通过审核。</p>
<p>NSExceptionDomains方式 设置域。可以简单理解成，把不支持https协议的接口设置成http的接口。</p>
<p>具体方法：</p>
<p>1.在项目的info.plist中添加一个Key：App Transport Security Settings，类型为字典类型。</p>
<p>2.然后给它添加一个Exception Domains，类型为字典类型；</p>
<p>3.把需要的支持的域添加給Exception Domains。其中域作为Key，类型为字典类型。</p>
<p>4.每个域下面需要设置3个属性：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSIncludesSubdomains</div><div class="line">NSExceptionRequiresForwardSecrecy</div><div class="line">NSExceptionAllowsInsecureHTTPLoads</div></pre></td></tr></table></figure>
<p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918170238256-1807962290.png" alt=""></p>
<p>细节提示:在iOS9以后的系统中如果使用到网络图片，也要注意网络图片是否是HTTP的哦，如果是，也要把图片的域设置哦！</p>
<h2 id="iOS-10-隐私权限设置"><a href="#iOS-10-隐私权限设置" class="headerlink" title="iOS 10 隐私权限设置"></a>iOS 10 隐私权限设置</h2><p>iOS 10 开始对隐私权限更加严格，如果你不设置就会直接崩溃，现在很多遇到崩溃问题了，一般解决办法都是在info.plist文件添加对应的Key-Value就可以了。</p>
<p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918164446868-505879984.png" alt=""></p>
<p>以上Value值，圈出的红线部分的文字是展示给用户看的，必须添加。</p>
<h2 id="Xcode-8-运行一堆没用的logs解决办法"><a href="#Xcode-8-运行一堆没用的logs解决办法" class="headerlink" title="Xcode 8 运行一堆没用的logs解决办法"></a>Xcode 8 运行一堆没用的logs解决办法</h2><p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114127228-2093692903.jpg" alt=""><br>上图我们看到，自己新建的一个工程啥也没干就打印一堆烂七八糟的东西，我觉得这个应该是Xcode 8的问题，</p>
<p>具体也没细研究，解决办法是设置OS_ACTIVITY_MODE : disable如下图:<br><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114153542-1346537228.jpg" alt=""></p>
<h2 id="iOS-10-UIStatusBar方法过期"><a href="#iOS-10-UIStatusBar方法过期" class="headerlink" title="iOS 10 UIStatusBar方法过期:"></a>iOS 10 UIStatusBar方法过期:</h2><p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114216825-2072979176.jpg" alt=""></p>
<p>在我们开发中有可能用到UIStatusBar一些属性，在iOS 10 中这些方法已经过期了，如果你的项目中有用的话就得需要适配。</p>
<p>上面的图片也能发现，如果在iOS 10中你需要使用preferredStatusBar比如这样：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (<span class="built_in">UIStatusBarStyle</span>)preferredStatusBarStyle &#123; </div><div class="line">   <span class="keyword">return</span> <span class="built_in">UIStatusBarStyleDefault</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="iOS-10-UICollectionView-性能优化"><a href="#iOS-10-UICollectionView-性能优化" class="headerlink" title="iOS 10 UICollectionView 性能优化"></a>iOS 10 UICollectionView 性能优化</h2><p>随着开发者对UICollectionView的信赖，项目中用的地方也比较多，但是还是存在一些问题，比如有时会卡顿、加载慢等。所以iOS 10 对UICollectionView进一步的优化。</p>
<ul>
<li>UICollectionView cell pre-fetching预加载机制</li>
<li>UICollectionView and UITableView prefetchDataSource    新增的API 针对self-sizing cells 的改进</li>
<li>Interactive reordering</li>
</ul>
<p>在iOS 10 之前,UICollectionView上面如果有大量cell,当用户活动很快的时候,整个UICollectionView的卡顿会很明显,为什么会造成这样的问题,这里涉及到了iOS 系统的重用机制,当cell准备加载进屏幕的时候,整个cell都已经加载完成,等待在屏幕外面了,也就是整整一行cell都已经加载完毕,这就是造成卡顿的主要原因,专业术语叫做:掉帧.<br>要想让用户感觉不到卡顿,我们的app必须帧率达到60帧/秒,也就是说每帧16毫秒要刷新一次.</p>
<p>iOS 10 之前UICollectionViewCell的生命周期是这样的:</p>
<ul>
<li>1.用户滑动屏幕,屏幕外有一个cell准备加载进来,把cell从reusr队列拿出来,然后调用prepareForReuse方法,在这个方法里面,可以重置cell的状态,加载新的数据;</li>
<li>2.继续滑动,就会调用cellForItemAtIndexPath方法,在这个方法里面给cell赋值模型,然后返回给系统;</li>
<li>3.当cell马上进去屏幕的时候,就会调用willDisplayCell方法,在这个方法里面我们还可以修改cell,为进入屏幕做最后的准备工作;</li>
<li>4.执行完willDisplayCell方法后,cell就进去屏幕了.当cell完全离开屏幕以后,会调用didEndDisplayingCell方法.</li>
</ul>
<p>　iOS 10 UICollectionViewCell的生命周期是这样的:</p>
<ul>
<li>1.用户滑动屏幕,屏幕外有一个cell准备加载进来,把cell从reusr队列拿出来,然后调用prepareForReuse方法,在这里当cell还没有进去屏幕的时候,就已经提前调用这个方法了,对比之前的区别是之前是cell的上边缘马上进去屏幕的时候就会调用该方法,而iOS 10 提前到cell还在屏幕外面的时候就调用;</li>
<li>2.在cellForItemAtIndexPath中创建cell，填充数据，刷新状态等操作,相比于之前也提前了;</li>
<li>3.用户继续滑动的话,当cell马上就需要显示的时候我们再调用willDisplayCell方法,原则就是:何时需要显示,何时再去调用willDisplayCell方法;</li>
<li>4.当cell完全离开屏幕以后,会调用didEndDisplayingCell方法,跟之前一样,cell会进入重用队列.</li>
<li>在iOS 10 之前,cell只能从重用队列里面取出,再走一遍生命周期,并调用cellForItemAtIndexPath创建或者生成一个cell.<br>在iOS 10 中,系统会cell保存一段时间,也就是说当用户把cell滑出屏幕以后,如果又滑动回来,cell不用再走一遍生命周期了,只需要调用willDisplayCell方法就可以重新出现在屏幕中了.</li>
<li>iOS 10 中,系统是一个一个加载cell的,二以前是一行一行加载的,这样就可以提升很多性能;</li>
<li>iOS 10 新增加的Pre-Fetching预加载 </li>
<li>这个是为了降低UICollectionViewCell在加载的时候所花费的时间,在 iOS 10 中,除了数据源协议和代理协议外,新增加了一个UICollectionViewDataSourcePrefetching协议,这个协议里面定义了两个方法:</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView prefetchItemsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cancelPrefetchingForItemsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths  <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div></pre></td></tr></table></figure>
<p>　　　在ColletionView prefetchItemsAt indexPaths这个方法是异步预加载数据的,当中的indexPaths数组是有序的,就是item接收数据的顺序;<br>　　　CollectionView cancelPrefetcingForItemsAt indexPaths这个方法是可选的,可以用来处理在滑动中取消或者降低提前加载数据的优先级.<br>　　　注意:这个协议并不能代替之前读取数据的方法,仅仅是辅助加载数据.<br>　　　Pre-Fetching预加载对UITableViewCell同样适用.
　　　</p>
<h2 id="iOS-10-UIColor-新增方法"><a href="#iOS-10-UIColor-新增方法" class="headerlink" title="iOS 10 UIColor 新增方法"></a>iOS 10 UIColor 新增方法</h2><p>以下是官方文档的说明：</p>
<p>Most graphics frameworks throughout the system, including Core Graphics, Core Image, Metal, and AVFoundation, have substantially improved support for extended-range pixel formats and wide-gamut color spaces. By extending this behavior throughout the entire graphics stack, it is easier than ever to support devices with a wide color display. In addition, UIKit standardizes on working in a new extended sRGB color space, making it easy to mix sRGB colors with colors in other, wider color gamuts without a significant performance penalty.</p>
<p>Here are some best practices to adopt as you start working with Wide Color.</p>
<ul>
<li>In iOS 10, the UIColor class uses the extended sRGB color space and its initializers no longer clamp raw component values to between 0.0 and 1.0. If your app relies on UIKit to clamp component values (whether you’re creating a color or asking a color for its component values), you need to change your app’s behavior when you link against iOS 10.</li>
<li>When performing custom drawing in a UIView on an iPad Pro (9.7 inch), the underlying drawing environment is configured with an extended sRGB color space.</li>
<li>If your app renders custom image objects, use the new UIGraphicsImageRenderer class to control whether the destination bitmap is created using an extended-range or standard-range format.</li>
<li>If you are performing your own image processing on wide-gamut devices using a lower level API, such as Core Graphics or Metal, you should use an extended range color space and a pixel format that supports 16-bit floating-point component values. When clamping of color values is necessary, you should do so explicitly.</li>
<li><p>Core Graphics, Core Image, and Metal Performance Shaders provide new options for easily converting colors and images between color spaces.</p>
<p>因为之前我们都是用RGB来设置颜色，反正用起来也不是特别多样化，这次新增的方法应该就是一个弥补吧。所以在iOS 10 苹果官方建议我们使用sRGB，因为它性能更好，色彩更丰富。如果你自己为UIColor写了一套分类的话也可尝试替换为sRGB，UIColor类中新增了两个Api如下:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">UIColor</span> *)colorWithDisplayP3Red:(<span class="built_in">CGFloat</span>)displayP3Red green:(<span class="built_in">CGFloat</span>)green blue:(<span class="built_in">CGFloat</span>)blue alpha:(<span class="built_in">CGFloat</span>)alpha <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div><div class="line">- (<span class="built_in">UIColor</span> *)initWithDisplayP3Red:(<span class="built_in">CGFloat</span>)displayP3Red green:(<span class="built_in">CGFloat</span>)green blue:(<span class="built_in">CGFloat</span>)blue alpha:(<span class="built_in">CGFloat</span>)alpha <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="iOS-10-UITextContentType"><a href="#iOS-10-UITextContentType" class="headerlink" title="iOS 10 UITextContentType"></a>iOS 10 UITextContentType</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">// The textContentType property is to provide the keyboard with extra information about the semantic intent of the text document.@property(nonatomic,copy) UITextContentType textContentType NS_AVAILABLE_IOS(10_0); // default is nil</div></pre></td></tr></table></figure>
<p>在iOS 10 UITextField添加了textContentType枚举，指示文本输入区域所期望的语义意义。</p>
<p>使用此属性可以给键盘和系统信息，关于用户输入的内容的预期的语义意义。例如，您可以指定一个文本字段，用户填写收到一封电子邮件确认uitextcontenttypeemailaddress。当您提供有关您期望用户在文本输入区域中输入的内容的信息时，系统可以在某些情况下自动选择适当的键盘，并提高键盘修正和主动与其他文本输入机会的整合。 </p>
<h2 id="iOS-10-字体随着手机系统字体而改变"><a href="#iOS-10-字体随着手机系统字体而改变" class="headerlink" title="iOS 10 字体随着手机系统字体而改变"></a>iOS 10 字体随着手机系统字体而改变</h2><p>当我们手机系统字体改变了之后，那我们App的label也会跟着一起变化，这需要我们写很多代码来进一步处理才能实现，但是iOS 10 提供了这样的属性adjustsFontForContentSizeCategory来设置。因为没有真机，具体实际操作还没去实现，如果理解错误帮忙指正。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">UILabel *myLabel = [UILabel new];   /*</div><div class="line">   UIFont 的preferredFontForTextStyle: 意思是指定一个样式，并让字体大小符合用户设定的字体大小。</div><div class="line">  */</div><div class="line">   myLabel.font =[UIFont preferredFontForTextStyle: UIFontTextStyleHeadline]; /*</div><div class="line">Indicates whether the corresponding element should automatically update its font when the device’s UIContentSizeCategory is changed.</div><div class="line">For this property to take effect, the element’s font must be a font vended using +preferredFontForTextStyle: or +preferredFontForTextStyle:compatibleWithTraitCollection: with a valid UIFontTextStyle.</div><div class="line">*/</div><div class="line">    //是否更新字体的变化</div><div class="line">   myLabel.adjustsFontForContentSizeCategory = YES;</div></pre></td></tr></table></figure>
<h2 id="iOS-10-UIScrollView新增refreshControl"><a href="#iOS-10-UIScrollView新增refreshControl" class="headerlink" title="iOS 10 UIScrollView新增refreshControl"></a>iOS 10 UIScrollView新增refreshControl</h2><p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114540839-1874104118.png" alt=""></p>
<p>iOS 10 以后只要是继承UIScrollView那么就支持刷新功能：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">nullable</span>) <span class="built_in">UIRefreshControl</span> *refreshControl <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0) __TVOS_PROHIBITED;</div></pre></td></tr></table></figure>
<h2 id="iOS-10-判断系统版本正确姿势"><a href="#iOS-10-判断系统版本正确姿势" class="headerlink" title="iOS 10 判断系统版本正确姿势"></a>iOS 10 判断系统版本正确姿势</h2><p>判断系统版本是我们经常用到的，尤其是现在大家都有可能需要适配iOS 10，那么问题就出现了，如下图：<br><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114620576-1303627103.jpg" alt=""></p>
<p>我们得到了答案是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//值为 1 [[[[UIDevice currentDevice] systemVersion] substringToIndex:1] <span class="built_in">integer</span>Value]</div><div class="line"></div><div class="line">//值为10.000000 [[UIDevice currentDevice] systemVersion].floatValue,</div><div class="line"></div><div class="line">//值为10.0 [[UIDevice currentDevice] systemVersion]</div></pre></td></tr></table></figure>
<p>所以说判断系统方法最好还是用后面的两种方法，哦~我忘记说了[[UIDevice currentDevice] systemVersion].floatValue这个方法也是不靠谱的，好像在8.3版本输出的值是8.2，记不清楚了反正是不靠谱的，所以建议大家用[[UIDevice<br> currentDevice] systemVersion]这个方法！</p>
<p> Swift判断如下：</p>
 <figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line"><span class="keyword">if</span> #available(iOS <span class="number">10.0</span>, *) &#123;</div><div class="line">         <span class="comment">// iOS 10.0</span></div><div class="line">         <span class="built_in">print</span>(<span class="string">"iOS 10.0"</span>);</div><div class="line">     &#125; <span class="keyword">else</span> &#123; &#125;</div></pre></td></tr></table></figure>
<h2 id="Xcode-8-插件不能用的问题"><a href="#Xcode-8-插件不能用的问题" class="headerlink" title="Xcode 8 插件不能用的问题"></a>Xcode 8 插件不能用的问题</h2><p>大家都升级了Xcode 8，但是对于插件依赖的开发者们，一边哭着一边去网上寻找解决办法。那么下面是解决办法：<br>让你的 Xcode8 继续使用插件(<a href="http://vongloo.me/2016/09/10/Make-Your-Xcode8-Great-Again/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="external">http://vongloo.me/2016/09/10/Make-Your-Xcode8-Great-Again/?utm_source=tuicool&amp;utm_medium=referral</a> )</p>
<p>但是看到文章最后的解释，我们知道如果用插件的话，可能安全上会有问题、并且提交审核会被拒绝，所以建议大家还是不要用了，解决办法总是有的，比如在Xcode中添加注释的代码块也是很方便的。</p>
<h2 id="iOS-10开始项目中有的文字显示不全问题"><a href="#iOS-10开始项目中有的文字显示不全问题" class="headerlink" title="iOS 10开始项目中有的文字显示不全问题"></a>iOS 10开始项目中有的文字显示不全问题</h2><p>我用Xcode 8 和Xcode 7.3分别测试了下，如下图：</p>
<p>xcode7<br><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114911979-1889192985.jpg" alt="xcode7"><br>xcode8</p>
<p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918114920417-1828331146.jpg" alt="xcode8"></p>
<p>创建一个Label然后让它自适应大小，字体大小都是17最后输出的宽度是不一样的，我们再看一下，<br>下面的数据就知道为什么升级iOS 10 之后App中有的文字显示不全了：</p>
<p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918115047642-1072358093.png" alt=""></p>
<p>英文字母会不会也有这种问题，我又通过测试，后来发现英文字母没有问题，只有汉字有问题。<br>目前只有一个一个修改控件解决这个问题，暂时没有其他好办法来解决。</p>
<h2 id="Xcode-8使用Xib-awakeFromNib的警告问题"><a href="#Xcode-8使用Xib-awakeFromNib的警告问题" class="headerlink" title="Xcode 8使用Xib awakeFromNib的警告问题"></a>Xcode 8使用Xib awakeFromNib的警告问题</h2><p>在Xcode 8之前我们使用Xib初始化- (void)awakeFromNib {}都是这么写也没什么问题，但是在Xcode 8会有如下警告：</p>
<p><img src="http://images2015.cnblogs.com/blog/575661/201609/575661-20160918164934170-318856946.png" alt=""></p>
<p>官方解释：<br>You must call the super implementation of awakeFromNib to give parent classes the opportunity to perform any additional initialization they require.<br>Although the default implementation of this method does nothing, many UIKit classes provide non-empty implementations.<br>You may call the super implementation at any point during your own awakeFromNib method.</p>
<p>你必须调用父类实现awakeFromNib来给父类来执行它们需要的任何额外的初始化的机会。<br>虽然这种方法的默认实现不做任何事情，许多UIKit类提供非空的实现。<br>你可以调用自己的awakeFromNib方法中的任何时候超级实现</p>
<p>　</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Xcode8/">Xcode8</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-苹果Mac os系统u盘安装系统制作教程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/08/15/MacOSCreat.html" class="article-date">
      <time datetime="2016-08-15T03:22:29.000Z" itemprop="datePublished">2016-08-15</time>
</a>

 
    <a href="/blog/2016/08/15/MacOSCreat.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/08/15/MacOSCreat.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/08/15/MacOSCreat.html">苹果Mac os系统u盘安装系统制作教程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h3 id="苹果系统Mac-OS-X安装U盘怎么制作-很多苹果的用户都不知道如何使用U盘装系统，而苹果Mac电脑通过U盘安装系统-前提的是需要先制作Mac启动U盘，许多果粉在删除或者需要重装苹果系统的时候，都不知道应该要如何使用U盘制作工具来安装苹果系统，本文主要为大家介绍苹果系统U盘制作教程。"><a href="#苹果系统Mac-OS-X安装U盘怎么制作-很多苹果的用户都不知道如何使用U盘装系统，而苹果Mac电脑通过U盘安装系统-前提的是需要先制作Mac启动U盘，许多果粉在删除或者需要重装苹果系统的时候，都不知道应该要如何使用U盘制作工具来安装苹果系统，本文主要为大家介绍苹果系统U盘制作教程。" class="headerlink" title="　　苹果系统Mac OS X安装U盘怎么制作?很多苹果的用户都不知道如何使用U盘装系统，而苹果Mac电脑通过U盘安装系统,前提的是需要先制作Mac启动U盘，许多果粉在删除或者需要重装苹果系统的时候，都不知道应该要如何使用U盘制作工具来安装苹果系统，本文主要为大家介绍苹果系统U盘制作教程。"></a>　　苹果系统Mac OS X安装U盘怎么制作?很多苹果的用户都不知道如何使用U盘装系统，而苹果Mac电脑通过U盘安装系统,前提的是需要先制作Mac启动U盘，许多果粉在删除或者需要重装苹果系统的时候，都不知道应该要如何使用U盘制作工具来安装苹果系统，本文主要为大家介绍苹果系统U盘制作教程。</h3>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MAC/">MAC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/U盘/">U盘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/系统/">系统</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2016/08/15/MacOSCreat.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Swift - 按钮（UIButton）的用法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/06/20/swift-UIButton.html" class="article-date">
      <time datetime="2016-06-20T07:33:29.000Z" itemprop="datePublished">2016-06-20</time>
</a>

 
    <a href="/blog/2016/06/20/swift-UIButton.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/06/20/swift-UIButton.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/06/20/swift-UIButton.html">Swift - 按钮（UIButton）的用法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h4 id="1-按钮有下面四种类型："><a href="#1-按钮有下面四种类型：" class="headerlink" title="1. 按钮有下面四种类型："></a>1. 按钮有下面四种类型：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">UIButtonType.ContactAdd：前面带“+”图标按钮，默认文字颜色为蓝色，有触摸时的高亮效果</div><div class="line">UIButtonType.DetailDisclosure：前面带“!”图标按钮，默认文字颜色为蓝色，有触摸时的高亮效果</div><div class="line">UIButtonType.System：前面不带图标，默认文字颜色为蓝色，有触摸时的高亮效果</div><div class="line">UIButtonType.Custom：定制按钮，前面不带图标，默认文字颜色为白色，无触摸时的高亮效果</div><div class="line">UIButtonType.InfoDark：为感叹号“!”圆形按钮</div><div class="line">UIButtonType.InfoLight：为感叹号“!”圆形按钮</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//创建一个ContactAdd类型的按钮</span></div><div class="line"><span class="keyword">let</span> button:<span class="type">UIButton</span> = <span class="type">UIButton</span>(type:.<span class="type">ContactAdd</span>)</div><div class="line"><span class="comment">//设置按钮位置和大小</span></div><div class="line">button.frame=<span class="type">CGRectMake</span>(<span class="number">10</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">30</span>)</div><div class="line"><span class="comment">//设置按钮文字</span></div><div class="line">button.setTitle(<span class="string">"按钮"</span>, forState:<span class="type">UIControlState</span>.<span class="type">Normal</span>)</div><div class="line"><span class="keyword">self</span>.view.addSubview(button);</div></pre></td></tr></table></figure>
<h4 id="2-对于Custom定制类型按钮，代码可简化为："><a href="#2-对于Custom定制类型按钮，代码可简化为：" class="headerlink" title="2.对于Custom定制类型按钮，代码可简化为："></a>2.对于Custom定制类型按钮，代码可简化为：</h4>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2016/06/20/swift-UIButton.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS从App跳转至系统设置菜单" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/03/13/openSchemes.html" class="article-date">
      <time datetime="2016-03-13T06:22:29.000Z" itemprop="datePublished">2016-03-13</time>
</a>

 
    <a href="/blog/2016/03/13/openSchemes.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/03/13/openSchemes.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/03/13/openSchemes.html">iOS从App跳转至系统设置菜单</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>###在每个app中的设置页面都希望能够很方便的让用户开启/关闭消息提醒。方便用户体验。</p>
<h4 id="主要代码"><a href="#主要代码" class="headerlink" title="主要代码"></a>主要代码</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="built_in">UIApplicationOpenSettingsURLString</span>];</div><div class="line"> <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:url]) &#123;</div><div class="line">     [[<span class="built_in">UIApplication</span> sharedApplication] openURL:url];</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/APP/">APP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/系统/">系统</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/跳转/">跳转</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2016/03/13/openSchemes.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Swift中 core Foundation的运用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/02/15/coreFoundation.html" class="article-date">
      <time datetime="2016-02-15T03:22:29.000Z" itemprop="datePublished">2016-02-15</time>
</a>

 
    <a href="/blog/2016/02/15/coreFoundation.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/02/15/coreFoundation.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/02/15/coreFoundation.html">Swift中 core Foundation的运用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>Swift中的 Core Foundation 类型是一个成熟的类。当出现内存管理注释时，Swift 会自动地管理 Core Foundation 对象的内存，这其中包括你实例化了的 Core Foundation 对象。在 Swift 中，你可以自由变换 Fundation 和 Core Foundation 类型。如果你想先转换为桥接 Foundation 类型时，你也可以桥接一些 toll-free bridged Core Foundation 类型到 Swift 标准库类型。</p>
<h4 id="1-重定义类型"><a href="#1-重定义类型" class="headerlink" title="1.重定义类型"></a>1.重定义类型</h4><p>当 Swift 导入 Core Foundation 类型时，编译器会重映射导入的类型名字。编译器会从每个类型名字的末端移除Ref，这是因为所有的 Swift 类都属于引用类型，因此后缀是多余的。</p>
<p>Core Foundation 中的CFTypeRef类型会对Anyobject类型重映射。所以你以前使用的CFTypeRef，现在该换成AnyObject了。<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2016/02/15/coreFoundation.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-覆盖(重写)，重构，重载的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2016/02/15/overLoad.html" class="article-date">
      <time datetime="2016-02-15T03:22:29.000Z" itemprop="datePublished">2016-02-15</time>
</a>

 
    <a href="/blog/2016/02/15/overLoad.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2016/02/15/overLoad.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/02/15/overLoad.html">Swift中 覆盖(重写)，重构，重载的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <ul>
<li>重构, 是对软计设计方法的描述, 这个层面是架构和设计方法。</li>
<li>重构是一个软件维护的通用技巧, 重构的具体做法, 可以通过重写或者重载等, 但不限于此, 更改注释, 更改函数名类名等,都可以称之为重构。<blockquote>
<p>你今天写了一个应用, 读txt文档并显示, 几天后,用户的新需求来了, 告诉你, 我要读一个XML文本并显示, 这个时候, 你从前的代码需要做变更, 这个变更的动作, 就叫做重构。<br>你维护的模块有个类叫做Class_B, 别人不爽, 觉得名字不好理解, 要你更改成TXTReader, 并附上注释。</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2016/02/15/overLoad.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ios10以及Xcode8的一些更新" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2015/09/10/xcode8.html" class="article-date">
      <time datetime="2015-09-10T03:25:29.000Z" itemprop="datePublished">2015-09-10</time>
</a>

 
    <a href="/blog/2015/09/10/xcode8.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2015/09/10/xcode8.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2015/09/10/xcode8.html">ios10以及Xcode8的一些更新（转）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>本文主要是一些对iOS新功能的探索，之前发现博客里关于iOS新功能的分析大多是过于概括，每个功能几句话，无法了解到具体的功能。所以本次的探索是基于Api层面，着重看一些具体用法所做的笔记，本来想分别画个类图来着，后来还是觉得太耗时而放弃。如果不想把苹果iOSSDK里的.h文件都摆出来详细读，那看这篇笔记应该是个不错的选择。</p>
<p> 本文以文档的目录为基础，提到的功能模块有：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Proactive Suggestions</div><div class="line"></div><div class="line">Integrating with the Messages App</div><div class="line"></div><div class="line">User Notifications</div><div class="line"></div><div class="line">Speech Recognition</div><div class="line"></div><div class="line">Wide Color</div><div class="line"></div><div class="line">Adapting to the True Tone Display</div><div class="line"></div><div class="line">App Search Enhancements</div><div class="line"></div><div class="line">Widget Enhancements</div><div class="line"></div><div class="line">Security and Privacy Enhancements</div></pre></td></tr></table></figure>
<p>还没有详细探索的模块是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SiriKit </div><div class="line"></div><div class="line">CallKit （工作职能和这里联系不多，还不care这里）</div><div class="line"></div><div class="line">Apple Pay Enhancements （工作职能和这里联系不多，还不care这里）</div></pre></td></tr></table></figure>
<h2 id="SiriKit"><a href="#SiriKit" class="headerlink" title="SiriKit"></a>SiriKit</h2><p> SiriKit的功能非常强大，支持音频、视频、消息发送接收、搜索照片、预订行程、管理锻炼等等。在用到此服务时，siri会发送Intent对象，里面包括用户的请求和各种数据，可以对这个intent处理选择适当的响应。 这个功能主要是看这两个头文件（#import <intents intents.h="">、#import <intentsui intentsui.h="">）所涵盖到的类太多，前期先略过了，之后等iOS10可以推送更新了再做进一步调研。</intentsui></intents></p>
<h2 id="Proactive-Suggestions-系统预先建议"><a href="#Proactive-Suggestions-系统预先建议" class="headerlink" title="Proactive Suggestions 系统预先建议"></a>Proactive Suggestions 系统预先建议</h2><h4 id="背景就是iOS9的时候系统给予的主动建议会通过：Spolight搜索，Safari搜索，Handoff，或者siri建议。-在iOS10之后新增了，键盘QuickType建议，地图，车载娱乐，应用切换，siri交互，锁屏播放。-比如你正在一个应用里看一个酒店，可以使用mapitem属性保存正在查看的这个酒店的位置，然后你切换旅行或地图App时这个位置可以自动提供使用。-如果你需要这样利用系统来共享一个位置，那你需要指定这个位置的经纬度，地名-电话等属性-来便于siri的直接调起。"><a href="#背景就是iOS9的时候系统给予的主动建议会通过：Spolight搜索，Safari搜索，Handoff，或者siri建议。-在iOS10之后新增了，键盘QuickType建议，地图，车载娱乐，应用切换，siri交互，锁屏播放。-比如你正在一个应用里看一个酒店，可以使用mapitem属性保存正在查看的这个酒店的位置，然后你切换旅行或地图App时这个位置可以自动提供使用。-如果你需要这样利用系统来共享一个位置，那你需要指定这个位置的经纬度，地名-电话等属性-来便于siri的直接调起。" class="headerlink" title="背景就是iOS9的时候系统给予的主动建议会通过：Spolight搜索，Safari搜索，Handoff，或者siri建议。 在iOS10之后新增了，键盘QuickType建议，地图，车载娱乐，应用切换，siri交互，锁屏播放。 比如你正在一个应用里看一个酒店，可以使用mapitem属性保存正在查看的这个酒店的位置，然后你切换旅行或地图App时这个位置可以自动提供使用。  如果你需要这样利用系统来共享一个位置，那你需要指定这个位置的经纬度，地名,电话等属性 来便于siri的直接调起。"></a>背景就是iOS9的时候系统给予的主动建议会通过：Spolight搜索，Safari搜索，Handoff，或者siri建议。 在iOS10之后新增了，键盘QuickType建议，地图，车载娱乐，应用切换，siri交互，锁屏播放。 比如你正在一个应用里看一个酒店，可以使用mapitem属性保存正在查看的这个酒店的位置，然后你切换旅行或地图App时这个位置可以自动提供使用。  如果你需要这样利用系统来共享一个位置，那你需要指定这个位置的经纬度，地名,电话等属性 来便于siri的直接调起。</h4><p> 文档中还列出了几种场景</p>
<p> 1.在输入框（UITextFiled）输入时，可以指定一下这个输入框的类型，以便系统可以分析出用户的语义。 是电话类型就建议一些电话，是地址类型就建议一些地址。看下头文件（#import <uikit uitextinputtraits.h="">）可指定的类型 就是这个新增的textContentType字段，里面有很多种类型可选。</uikit></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeName                      NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeNamePrefix                NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeGivenName                 NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeMiddleName                NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeFamilyName                NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeNameSuffix                NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeNickname                  NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeJobTitle                  NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeOrganizationName          NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeLocation                  NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeFullStreetAddress         NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeStreetAddressLine1        NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeStreetAddressLine2        NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeAddressCity               NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeAddressState              NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeAddressCityAndState       NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeSublocality               NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeCountryName               NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypePostalCode                NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeTelephoneNumber           NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeEmailAddress              NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeURL                       NS_AVAILABLE_IOS(10_0);</div><div class="line">UIKIT_EXTERN NSString *const UITextContentTypeCreditCardNumber          NS_AVAILABLE_IOS(10_0);</div></pre></td></tr></table></figure>
<p>2.如果是视频类App可以使用MPPlayableContentManager （#import <mediaplayer mpplayablecontentmanager.h="">）看了下，新增了一个属性nowPlayingIdentifiers，苹果的意思应该是只要你以前是用这个多媒体类播放音乐的我就可以让你在锁屏页面交互，需要配置在这个数组里。</mediaplayer></p>
<p>3.如果是出行类app可以使用MKDirectionsRequest。 （#import <mapkit mkdirectionsrequest.h="">  ）这个类里几乎没有新增api，iOS10就新增了一个枚举，而且看上去就是个默认值。如果要使用此功能，需要配置在info.plist文件里 新增key - value ，MKDirectionsApplicationSupportedModes - MKDirectionsModeRideShare。</mapkit></p>
<h2 id="User-Notifications-用户通知"><a href="#User-Notifications-用户通知" class="headerlink" title="User Notifications 用户通知"></a>User Notifications 用户通知</h2><p> 总体的意思就是支持了很多用户定义的通知，并且可以捕捉到各个通知状态的回调。以往通知的概念是：大家想接收的都提前做好准备，然后一下全量分发，没收到也不管了，也不关心发送者。现在用户通知做成了和网络请求有点像 一个先发request再得到response的流程，甚至封装了error，可以在各个状态的方法中做一些额外操作，并且也能取到一些字段，如发送者等。</p>
<p>此功能的头文件入口在#import <usernotifications usernotifications.h=""><br><img src="http://upload-images.jianshu.io/upload_images/1954780-7a6c2ffa9bb15c8b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="717809-20160620194852069-1522419410.png"></usernotifications></p>
<p> 1.NSString+UserNotifications.h</p>
<p>有一个方法 localizedUserNotificationStringForKey: arguments: （提供该通知被呈现时的本地化字符串），猜测下面的类有很多initWithIdentifier的，他们的indentifier就是这个。</p>
<p>2.UNError.h</p>
<p>有一个属性UNErrorDomain 和一个枚举 UNErrorCode，顾名思义。</p>
<p>3.UNNotification.h</p>
<p>里面有两个属性，date日期 和 request，这个request是上面“8”的类型UNNotificationRequest，点进去看了下比较清晰，有identifier标识，content内容，trigger触发条件， 和带上这三个东西的初始化方法。 其中内容 和 触发条件这两个属性，分别是上面“7” 和 “12”的类型，这个下面再谈。</p>
<p>4.UNNotificationAction.h</p>
<p>这个类突出的是一个通知的动作，有identifier，title，options（枚举，就是通知当前的权限，允许？拒绝？前台时允许？）属性。然后就是带上这三个东西的初始化方法。 然后比较费解的就是下面有一个子类UNTextInputNotificationAction ，这个子类有两个额外属性， 按钮title，和文本框placeholder， 为什么会是这两个属性？ 莫非是点击通知后下拉出的快速回复，有一个输入框和一个按钮。</p>
<p>5.UNNotificationAttachment.h</p>
<p>这个里面就是URL（资源url属性），type（附件类型）。 然后是带上这两个属性的初始化方法。 下面声明了几个字符串常量，暂时还不知道具体用在哪里，typeHint，hiddenKey，clippingRectKey，TimeKey。</p>
<p>6.UNNotificationCategory.h</p>
<p>有indentifier属性，actions（里面是数组），minimalActions（最重要的数组，就是只能给你两个位置显示你显示哪两个，这么个意思），intentIdentifiers属性（应该是和上面的动作数组关联的吧），options（权限相关，无？允许自定义关闭？允许车载系统交互？）。最后就是把这些都带上的init方法。  猜测这个类之所以取名叫category应该是，在某个地方展示通知的时候会把所有通知一一分类， 然后每个类别的通知可能最多只能让你展示几个，如果不做限制应该会展示全部通知，如果权限设置的是允许自定义关闭那可能就是支持类似一键清除的操作。</p>
<p>7.UNNotificationContent.h</p>
<p>消息的内容，一看就能知道应该是一个类似于Entity的东西，里面装有大量的属性：attachments（可选的附件集合），badge（小红点数量），body，categoryIndentifier，launchImageName（从消息里点开的应用程序应该能看到启动图对吧），subtitle，threadIdentifier（与request关联），title，userInfo，sound这个是“11”的类型，应该是同时来时的声音，点开“11”看一下 ，就俩方法，defaultSound，soundNamed: 自定义声音，都在~/Library/Sounds 目录下。 恩再回到刚才那个content类里面有个子类UNMutableNotificationContent，属性和父类相同，只不过是子类的属性都可以修改了，父类的那些属性都是readonly的。</p>
<p>8.UNNotificationRequest.h 上面第3条说过了</p>
<p>9.UNNotificationResponse.h </p>
<p>有action，也有request，那也就有response，这里面有两个属性，notification，actionIdentifier  响应里就这俩破玩意。 然后有个子类UNTextInputNotificationResponse， 这里面就一个属性userText ，看命名很好猜，应该就是前面说的那个有输入框里输入的内容。</p>
<p>10.UNNotificationSettings.h</p>
<p>这个类里就是一些设置了，有一个枚举说的是有没有权限，一个枚举说的是不支持？禁用？启用？。 然后下面一大波属性，小红点设置，声音设置，弹窗设置等等 都是这个枚举类型， 最后还有个alertStyle属性（枚举，None？Banner？alert？）。</p>
<p>11.sound前面第7条说过了</p>
<p>12.UNNotificationTrigger.h</p>
<p>有一个属性 repeats（是否重复发通知）。 下面有四个子类，push通知触发， 时间通知触发，日历通知触发，地区通知触发， 时间的有timeInterval属性， 日历的有dateComponents属性。 然后时间和日历的子类都有nextTriggerDate 方法。</p>
<p>13.UNUserNotificationCenter.h</p>
<p>这里面东西多到吐了，同学你记得NSNotificationCenter么？ 需要提一点的就是以前的通知中心有个方法[NSNotificationCenter defaultCenter]， 这里是[UNUserNotificationCenter currentNotificationCenter]， 提醒一下到时候别说敲不出来。 方法大多是一些remove，add，get等操作， 还有2个代理方法：通知将要发出去时调用，收到通知的response后调用。</p>
<p>14.UNNotificationServiceExtension.h</p>
<p>里面有两个方法，收到通知的请求后调用， 系统将要销毁时调用。</p>
<p>通知里面有UI相关的类 #import <usernotificationsui usernotificationsui.h=""></usernotificationsui></p>
<p>这个类里面就一个文件， 而且方法比较单一，就是收到通知调用，和收到通知的响应调用。 其他方法也就是mediaPlay 和 mediaPause 。和一些多媒体播放的按钮frame，color等， 这里面的作用难道仅仅就是通知来了后播放的音乐暂时暂停下，响一声通知，再播放？ 具体WWDC2016上说的锁屏页面的通知样式处理的api是在下面的部件增强章节中。</p>
<h2 id="Integrating-with-the-Messages-App-与系统短信-app交互"><a href="#Integrating-with-the-Messages-App-与系统短信-app交互" class="headerlink" title="Integrating with the Messages App 与系统短信 app交互"></a>Integrating with the Messages App 与系统短信 app交互</h2><p>对消息额支持很大，可以模拟发消息收消息，发邮件等，提供了UI界面。 也提供了一些额外扩展的api，如表情包区域。WWDC2016上说的各种消息内的新操作在头文件中都能找到Api。</p>
<p>此功能的头文件入口在#import <messages messages.h=""></messages></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1954780-61722c20f74fbe68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="717809-20160620165536303-1502683347.png"></p>
<p>1.MSMessagesAppViewController.h</p>
<p>这个类应该就是苹果自己的消息界面，你可以继承他写你自己自定义的界面。 属性有：activeConversation 指的是当前的会话对象，是上面“2”这个类型，具体详细可以看下面的第“2”点、还有个是presentationStyle（外观样式，枚举类型，紧缩？扩张？）。 接下来就是方法了：requestPresentationStyle（请求消息过渡到指定的样式），dismiss消除方法。 然后就是一波生命周期方法了，每一类都有will和did，会话信息将要（已经）活跃时，将要（已经）解除活跃，将要（已经）选择信息，将要（已经）收到信息，将要（已经）开始发送，将要（已经）取消发送，将要（已经）开始过渡。</p>
<p>2.MSConversation.h</p>
<p>属性有localParticipantIdentifier（当前会话参与者生成的标识，他说只有删了App才会变 姑且理解成id是不会变的），remoteParticipantIdentifiers（远端的标识符数组），selectedMessage（选中的信息），以及4个对象方法 插入一条信息，插入一个标签，插入一段文本，插入一个附件。 这四个方法都有成功的回调。</p>
<p>3.MSSession.h</p>
<p>这个类里面是空的，解释说是用session来处理消息序列间的关系。可能就是占个位，以后估计会添加东西。 这个MSSession是后面很多参数的类型，应该就是区分消息类似于标识符的作用。 </p>
<p>4.MSMessage.h</p>
<p>初始化方法是initWithSession ，没错就是上面那个MSSession。 除了初始化方法剩下的就全是属性了：session，senderParticipantIdentifier（发送者的标识符），layout布局这个是“5”这个类型，URL，shouldExpire（选yes会自动消失，用户手动选择为这条消息续命），accessibilityLabel（残疾人模式支持），error。</p>
<p>5.MSMessageLayout.h</p>
<p>这个是抽象类，里面是空的，就是个布局文件，继承自NSObject。</p>
<p>6.MSMessageTemplateLayout.h</p>
<p>继承上面那个类，看名字是模板布局后面应该会用的挺多的，里面的属性有，标题，子标题，尾部标题，尾部子标题，图片，多媒体URL，图片标题，图片子标题。 </p>
<p>7.MSSticker.h</p>
<p>应该是消息上的表情包。 里面就有两个属性imageFileURL ，localizedDescription 图片和局部描述。然后是带上这两个属性的初始化方法 initWithContentsOfFileURL: localizedDescription: 。</p>
<p>8.MSStickerView.h</p>
<p>这个类就是一个view，里面包着一个sticker，也就是包裹着上面那个装饰品的view。 提供了带上sticker的初始化方法，一个常规属性animationDuration，和三个方法startAnimating，stopAnimating，isAnimating。</p>
<p>9.MSStickerBrowserViewDataSource.h</p>
<p>细思极恐，这个类不就是wwdc2016上说的那个可以在消息下面添加自定义表情的地方么。 符合datasource的风格，里面就两个方法，numberOfStickersInStickerBrowserView: （返回一个总数），stickerBrowserView：stickerAtIndex：（返回这个索引下的内容）。</p>
<p>10.MSStickerBrowserView.h</p>
<p>上面那个是datasource，那这个就是用了上面数据源的view呗。 除了初始化方法，有两个属性 stickerSize（枚举，小，中，大），dataSource（就是上面的“9”），还有个人reloadData方法。</p>
<p>11.MSStickerBrowserViewController.h</p>
<p>上面是个view， 这个就是承载上面那个view的viewcontroller。肯定得有这个属性stickerBrowserView 和初始化方法。</p>
<p>这个message模块还有UI相关的api   #import <messageui messageui.h=""></messageui></p>
<p>就是两个VC ,MFMailComposeViewController,MFMessageComposeViewController。 这两个都是继承自UINavigationController.   觉得这两个就是发邮件的编辑页面，和发消息的编辑页面。  发邮件的页面里有 canSendMail （Bool方法），set主题，set发件人，set收件人，set内容，set附件。 然后有一个代理，和代理方法，猜也能猜到 就是成功失败回调。mailComposeController:didFinishWithResult: error:  。 那另一个消息和这差不多了就不说了。</p>
<h2 id="Speech-Recognition-语音识别转文字"><a href="#Speech-Recognition-语音识别转文字" class="headerlink" title="Speech Recognition 语音识别转文字"></a>Speech Recognition 语音识别转文字</h2><p>这个类里面的Api和方法调用都非常清晰，感觉使用起来会非常方便。真的为科大讯飞捏把汗了，科大讯飞的app（录音宝）我看过，都还没有说一段语音能直接转文字的功能，他们是直接把声音文件上传，然后24小时候再发给你转换后的结果…而且一上来就要收费。苹果的这个功能已经做到了系统原生支持，真的厉害。</p>
<p>此功能的头文件入口在#import <speech speech.h=""></speech></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1954780-ce6606e8d2a0daaf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="717809-20160619182921085-1315021923.png"></p>
<p> 1.SFSpeechRecognitionResult.h</p>
<p>这个类里有三个属性：bestTranscription 就是最优的转化结果咯，是上面的“7”这个类型的。然后再看下这个SFTranscription.h ，果然不出所料 有两个属性 一个是字符串类型formattedString 一个是数组类型的segments ，恩 前者就是转化后的字符串，后者是分割后的一个个小结果集合。 然后这个分割的一个个小结果呢又是上面“6”这个类型。那再看一下“6” 里面的属性就是 substring， 时间戳，duration，准确性，备选答案数组，这些很清晰的东西了。</p>
<p>2.SFSpeechRecognitionRequest.h</p>
<p>这个类里东西有点多，属性taskHint，是上面“4”这个类型，点开一看就是一个枚举，用来区分你这个语音识别的请求是哪一类的 查找？确认？听写？无法识别？。 接下来是两个BOOL类型的，shouldReportPartialResults（是否语音局部的一块一块也要处理？默认选false就是一句话全说完了再上传吧），detectMultipleUtterances（假如你说了10秒钟，只有后5秒匹配到了结果，那你前面删了还是保留？默认不删），然后是分析到的关键字数组，和标识符什么的。 然后这个request有两个子类，一个是从本地URL读取 一个声音文件去识别， 一个是默认做法用话筒和AVFoundation库接收到声音去识别，然后有几个拼接声音的API。</p>
<p>3.SFSpeechRecognitionTask.h</p>
<p>从名字就能看出来这是语音识别最重要的一个类了，里面的属性有：state这是一个枚举，说明当前状态是进行中？已完成？被取消？等等。 接下来是三个常见的 isFinishing ，isCancelled ，error 。 接下来是 isPowerAvailable （是否开启说话声音大小的监测？），peakPower（最大声音），averagePower（平均声音）。 属性就这些了，接下来就是一个协议和一波代理方法：刚刚识别出话语调用，猜测话语时调用，话说完了调用，取消时调用，等等等，你能想到的回调方法苹果应该都有的。</p>
<p>4.上面第2条里面说过了</p>
<p>5.SFSpeechRecognizer.h</p>
<p>和系统的那些相机权限，通讯录权限有点像， 就是现在的状态是什么？同意？拒绝？还是未选择过？ 然后提供了方法让用户去选择。 然后有些属性：NSSet类型的supportedLocales（支持地区方言的集合），</p>
<p>available是否可用，locale当前地区 ，defaultTaskHint默认类别，request（就是上面说的请求），队列，代理。 然后有个协议和代理方法：发现用户给与的权限发生改变时调用。</p>
<p>6和7. 上面第1条里说过了 </p>
<h2 id="Wide-Color-宽域颜色"><a href="#Wide-Color-宽域颜色" class="headerlink" title="Wide Color 宽域颜色"></a>Wide Color 宽域颜色</h2><p>文档的原话说：大多数的 core字打头的图形框架 还有AVFoundation 都大大提高了对扩展像素和宽色域色彩空间的支持。通过图形堆栈扩展这种方式比以往支持广色域的显示设备更加容易。现在对UIKit扩展可以在sRGB的色彩空间下工作，性能更好，也可以在更广泛的色域来搭配sRGB颜色。 然后说了几个场景说建议你用sRGB吧，比如依赖于UIkit的clamp component values的应用程序，或是使用较低级别api执行自己图像处理的 都建议用sRGB吧。</p>
<p>然后看了下UIColor类里 到底什么是sRGB？ 发现多了两个iOS10新增的api。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">UIColor</span> *)colorWithDisplayP3Red:(<span class="built_in">CGFloat</span>)displayP3Red green:(<span class="built_in">CGFloat</span>)green blue:(<span class="built_in">CGFloat</span>)blue alpha:(<span class="built_in">CGFloat</span>)alpha <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);  </div><div class="line"> </div><div class="line">- (<span class="built_in">UIColor</span> *)initWithDisplayP3Red:(<span class="built_in">CGFloat</span>)displayP3Red green:(<span class="built_in">CGFloat</span>)green blue:(<span class="built_in">CGFloat</span>)blue alpha:(<span class="built_in">CGFloat</span>)alpha <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div></pre></td></tr></table></figure>
<p> 细节都是一样的就是一个类方法一个实例方法， 我理解下，就是说建议你们以前改用colorwithRGB的地方 现在都换成这个方法叭。可能大多数公司都抽成了 RGB(a,g,b,a)这种宏吧，那就在宏定义那改一下就好了。</p>
<h2 id="Adapting-to-the-True-Tone-Display-真彩色显示"><a href="#Adapting-to-the-True-Tone-Display-真彩色显示" class="headerlink" title="Adapting to the True Tone Display 真彩色显示"></a>Adapting to the True Tone Display 真彩色显示</h2><p>真彩色的显示会根据光感应器来进行自动的调节来达到特定环境下的显示与性能平衡效果。 如果需要这个功能的话需要再info.plist里配置</p>
<p>UIWhitePointAdaptivityStyle</p>
<p>共有五种选择：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">1.UIWhitePointAdaptivityStyleStandard 标准</div><div class="line"></div><div class="line">2.UIWhitePointAdaptivityStyleReading 阅读</div><div class="line"></div><div class="line">3.UIWhitePointAdaptivityStylePhoto 图片</div><div class="line"></div><div class="line">4.UIWhitePointAdaptivityStyleVideo 视频</div><div class="line"></div><div class="line">5.UIWhitePointAdaptivityStyleGame 游戏</div></pre></td></tr></table></figure>
<p>然后他说的很清楚，如果你是图片处理类的app，那就直接配stylePhoto吧，如果你是阅读类的那就直接配styleReading吧。 这五个形式的显示效果从上往下递减，我理解是说在阅读时给你最好的效果，但如果在游戏时也给那么好的效果会影响性能，就给你一个相对次一点的显示效果让性能更流畅。</p>
<h2 id="App-Search-Enhancements-应用搜索增强"><a href="#App-Search-Enhancements-应用搜索增强" class="headerlink" title="App Search Enhancements 应用搜索增强"></a>App Search Enhancements 应用搜索增强</h2><p>iOS10的搜索功能做了一定增强：应用程序内搜索，搜索传递，考虑私人差异，结果可视化。 使用CSSearchQuery类，调用Core Spotlight的api，可以让你不必自己维护自己的搜索索引，关于对搜索关键字的处理，还有考虑到不同类别差异导致搜索结果的排序都是苹果帮你处理。</p>
<p>并且搜索结果可以继续往下传递，假设你用Core Spotlight搜索火车站，提示的是地图类app搜索火车站的结果，你点进去后，这个地图类app会接收到“火车站”这个字段在应用内也完成搜索。支持此功能也是需要配置plist文件:key-value  CoreSpotlightContinuation-YES，然后设置CSQueryContinuationActionType（#import<corespotlight cssearchableitem.h="">）。最后传递的搜索字符串用continueUserActivity：restorationHandler：方法接收。</corespotlight></p>
<p>然后现在看一下#import <corespotlight cssearchquery.h="">头文件里面的结构。</corespotlight></p>
<p>看上去这个CSSearchQuery像是一个查询语句操作，有创建，查询成功和错误等。初始化方法是initWithQueryString: attributes:。 有isCanceled属性 和 cancel 和 start方法。 还有foundItemCount属性，看上去是能够得到搜索的结果个数。protectionClasses(数组)，看上去像是隐私相关受保护的文件。 还有两个block，一个是搜索结束后回调，参数是NSError；一个是查询到结果时回调，参数是items数组。这个items数组都是CSSearchableItem类型，这里面有个attributeSet属性，里面可以传入以下类型</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1954780-34f70f5eea73cfae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="717809-20160626110525547-1800081610.png"></p>
<h2 id="Widget-Enhancements-锁屏部件增强"><a href="#Widget-Enhancements-锁屏部件增强" class="headerlink" title="Widget Enhancements 锁屏部件增强"></a>Widget Enhancements 锁屏部件增强</h2><p>现在锁屏界面有了新的设计，建议我们废弃以前的notificationCenterVibrancyEffect 改用widgetPrimaryVibrancyEffect或者widgetSecondaryVibrancyEffect，并且窗口的小部件可以让你描述有多少东西可用，支持紧凑和扩展两种形态。</p>
<p>这些新旧的Effect效果在这个类下，可能是之前锁屏玩不出什么花样所以大家没怎么关注这里。  </p>
<p> #import <notificationcenter notificationcenter.h=""> 里面有三个头文件</notificationcenter></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1954780-113e65e7750da91b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="717809-20160621170857694-1224766609.png"></p>
<p> 1.NCWidgetProviding.h</p>
<p>先来两个方法 </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- (<span class="keyword">void</span>)widgetPerformUpdateWithCompletionHandler:(<span class="keyword">void</span> (^)(NCUpdateResult result))completionHandler;</div></pre></td></tr></table></figure>
<p>这个方法如果实现了，系统将在适当的时候召唤部件更新形态，无论是在通知中心还是后台。 需要启用后台更新功能，部件会在异步工作主线程更新，调用参数块的工作完成后会得到相应的结果。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)widgetActiveDisplayModeDidChange:(NCWidgetDisplayMode)activeDisplayMode withMaximumSize:(<span class="built_in">CGSize</span>)maxSize;</div></pre></td></tr></table></figure>
<p>这个方法应该是部件变化时调用，参数是最大有多大。</p>
<p>这里声明了一个分类UIVibrancyEffect (NCWidgetAdditions)，里面就是本章节说的iOS10新增API</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">UIVibrancyEffect</span> *)widgetPrimaryVibrancyEffect <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div><div class="line"> </div><div class="line">+ (<span class="built_in">UIVibrancyEffect</span> *)widgetSecondaryVibrancyEffect <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">10</span>_0);</div></pre></td></tr></table></figure>
<p>这两个方法名字上是老大和老二，有什么区别？ 都是用在选择的文字或图形上，默认用上面，如果开启了further diminution（应该是类似于上面压缩模式）就用下面的。</p>
<p>下面又声明了一个分类NSExtensionContext (NCWidgetAdditions)，里面也是iOS10的新增API</p>
<p>里面有两个属性 widgetLargestAvailableDisplayMode ，widgetActiveDisplayMode 。 是两种显示模式是NCWidgetDisplayMode枚举类型，有紧缩和扩张两种。 ，估计假如是新闻通知一个是一般大小，一个是点开详情的大小。 然后就是一个方法widgetMaximumSizeForDisplayMode ，返回值是CGSize取到播放模式的最大尺寸。</p>
<p>2.NCWidgetController.h</p>
<p>里面除了个初始化方法，还有一个方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setHasContent:(<span class="built_in">BOOL</span>)flag forWidgetWithBundleIdentifier:(<span class="built_in">NSString</span> *)bundleID;</div></pre></td></tr></table></figure>
<p>第一个参数默认为yes，就是该展示时就展示，这个方法可以跨小组件间通讯，以及和providing app交互。</p>
<p>3.NCWidgetTypes.h</p>
<p>里面就一个枚举类型NCWidgetDisplayMode ，前面第1点说过了。</p>
<h2 id="Security-and-Privacy-Enhancements-安全和保密性增强"><a href="#Security-and-Privacy-Enhancements-安全和保密性增强" class="headerlink" title="Security and Privacy Enhancements 安全和保密性增强"></a>Security and Privacy Enhancements 安全和保密性增强</h2><p>安全方面在iOS10中引入了更多修改和补充，具体有以下几点：</p>
<p>1.在info.plist文件新增了一个key，NSAllowsArbitraryLoadsInWebContent，允许任意web页面加载，同时苹果会用ATS保护你的app。</p>
<p>2.使用改进后的SecKey API 而不是过时的 CDSA API。</p>
<p>3.安全传输API中不再支持SSLv3， 建议你们尽快停用SHA1和3DES加密算法。</p>
<p>4.剪贴板的扩展，因为wwdc2016演示了可以跨设备复制粘贴啊，那肯定要做一些限制可见（#import <uikit uipasteboard.h="">）</uikit></p>
<p>5.这点最重要的，建议尽快适配， 所有和用户权限相关的地方必须在info.plist里配置里面包括</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">NSBluetoothPeripheralUsageDescription</div><div class="line">NSCalendarsUsageDescription</div><div class="line">NSCameraUsageDescription</div><div class="line">NSContactsUsageDescription</div><div class="line">NSHealthShareUsageDescription</div><div class="line">NSHealthUpdateUsageDescription</div><div class="line">NSHomeKitUsageDescription</div><div class="line">NSLocationAlwaysUsageDescription</div><div class="line">NSLocationWhenInUseUsageDescription</div><div class="line">NSMicrophoneUsageDescription</div><div class="line">NSMotionUsageDescription</div><div class="line">NSPhotoLibraryUsageDescription</div><div class="line">NSRemindersUsageDescription</div><div class="line">NSSiriUsageDescription</div><div class="line">NSSpeechRecognitionUsageDescription</div><div class="line">NSVideoSubscriberAccountUsageDescription</div><div class="line">NSVoIPUsageDescription</div></pre></td></tr></table></figure>
<p>虽然现在还没有iOS10系统的手机，但是我用模拟器试了下，亲测如果我想唤起通讯录但是没有配置NSContactsUsageDescription，刚启动时不会崩溃，但是在唤起操作发生时会直接崩溃。 在info.plist设置之后就可以正常使用了。</p>
<p>本文转自<a href="http://www.cnblogs.com/dsxniubility/p/5596973.html" target="_blank" rel="external">井柏然微博</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/适配/">适配</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-cocoaPod的安装，删除以及基本使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2015/08/13/cocoPod.html" class="article-date">
      <time datetime="2015-08-13T08:23:29.000Z" itemprop="datePublished">2015-08-13</time>
</a>

 
    <a href="/blog/2015/08/13/cocoPod.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2015/08/13/cocoPod.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2015/08/13/cocoPod.html">cocoaPod的安装，删除以及基本使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>如何安装?</p>
<p>1.安装ruby环境,添加淘宝ruby镜像<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ gem sources --remove https://rubygems.org/</div><div class="line">//等有反应之后再敲入以下命令</div><div class="line">$ gem sources <span class="_">-a</span> http://ruby.taobao.org/</div></pre></td></tr></table></figure></p>
<p>2.查看是否设置成功:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem sources <span class="_">-l</span></div></pre></td></tr></table></figure>
<p>3.然后安装cocoapods:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo gem install cocoapods</div></pre></td></tr></table></figure></p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2015/08/13/cocoPod.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-NSDictionary字典的使用以及注意" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2015/07/18/NSDictionary.html" class="article-date">
      <time datetime="2015-07-18T06:13:29.000Z" itemprop="datePublished">2015-07-18</time>
</a>

 
    <a href="/blog/2015/07/18/NSDictionary.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2015/07/18/NSDictionary.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2015/07/18/NSDictionary.html">NSDictionary字典的使用以及注意</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>字典：NSDictionary<br>字典就是关键字及其定义（描述）的集合。</p>
<ul>
<li>Cocoa中的实现字典的集合NSDictionary在给定的关键字（key）下存储一个数值（value）。然后你就可以用这个关键字来查找相应的数值。</li>
<li>字典（也被称为散列表或关联数组）使用的是键查询的优化存储方式。它可以立即找出要查询的数据，而不需要遍历整个数组进行查找。</li>
<li>!注意字典是无序的。数组是有序的。</li>
<li>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2015/07/18/NSDictionary.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-关于日期格式设置及转换" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/blog/2015/07/05/dateFormatter.html" class="article-date">
      <time datetime="2015-07-05T06:13:29.000Z" itemprop="datePublished">2015-07-05</time>
</a>

 
    <a href="/blog/2015/07/05/dateFormatter.html#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"  data-thread-key="blog/2015/07/05/dateFormatter.html" ></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2015/07/05/dateFormatter.html">关于日期格式设置及转换</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>总结一下关于日期格式的问题汇总。</p>
<h4 id="1-把字符串转化为任意日期时间格式"><a href="#1-把字符串转化为任意日期时间格式" class="headerlink" title="1.把字符串转化为任意日期时间格式"></a>1.把字符串转化为任意日期时间格式</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//将要转换的字符串</span></div><div class="line"> <span class="built_in">NSString</span>* string = <span class="string">@"20160512134106"</span>;</div><div class="line">    <span class="built_in">NSDateFormatter</span> *inputFormatter = [[<span class="built_in">NSDateFormatter</span> alloc] init] ;</div><div class="line"><span class="comment">//将要显示日期的时区。</span></div><div class="line">    [inputFormatter setLocale:[[<span class="built_in">NSLocale</span> alloc] initWithLocaleIdentifier:<span class="string">@"en_US"</span>] ];</div><div class="line"><span class="comment">//显示日期的格式。</span></div><div class="line">    [inputFormatter setDateFormat:<span class="string">@"yyyyMMddHHmmss"</span>];</div><div class="line">    <span class="built_in">NSDate</span>* inputDate = [inputFormatter dateFromString:string];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"date = %@"</span>, inputDate);</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1954780-3517069646bac263.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<h4 id="连接到上面的代码"><a href="#连接到上面的代码" class="headerlink" title="连接到上面的代码"></a>连接到上面的代码</h4>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/开发/">开发</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/blog/2015/07/05/dateFormatter.html#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2014-2016 richard
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


    
        <script>
            if ($(".left-col").is(":visible")) {
                var duoshuoQuery = {short_name:"richard-yu"};
                (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'http://static.duoshuo.com/embed.js';
                    s.async = true; s.charset = 'UTF-8';
                    (d.head || d.body).appendChild(s);
                })();

                $(document).ready(function(){
                    var $duoshuoCount = $(".ds-thread-count");
                    $duoshuoCount.bind("DOMNodeInserted", function(e) {
                        var num = $(this).text().replace(/[^0-9]/ig,"");
                        $(this).siblings(".count-comment").text(num);
                        $(this).remove();
                    })
                })
            }
        </script>
    

     




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>